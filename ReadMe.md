# 自炊TIMSプラグイン（東京メトロ互換）
このプラグインは、JR・相鉄線内における通常の電車型TIMS画面表示の模擬、およびその他の路線における簡易型のTIMS画面表示の模擬（メトロ総合プラグイン・小田急線用プラグインのTIS画面表示と互換性あり）、及びメータ画面の模擬を行う。メトロ総合プラグインとの併用が前提。本プラグインはメトロ総合プラグインの後に読み込むこと。

## 設定番号
### panelインデックス
- 端子台を参照すること。一部の機能はiniファイルの設定により有効・無効化される。
- DigitalNumber形式の画像の詳細については付属のファイル「Beacon(for JR Line).pdf」を参照すること。

### soundインデックス
- 端子台を参照すること。一部の機能はiniファイルの設定により有効・無効化される。

### beaconインデックス
- JR・相鉄線内のインデックスは（列車番号を除き）通常の自炊TIMSプラグインと同一。付属のファイル「Beacon(for JR Line).pdf」を参照すること。
- JR・相鉄線内以外のインデックスは下記の通り。なお端子台にも同様の内容がある。

| INDEX |表示|設定値|備考|
| ---: | :---: | :---: | :---: |
|10|駅名表示設定|駅番号を設定|senddataを0にしないこと
|70|走行区間設定|駅番号をつなげた4桁の整数|index10とは併用不可。小田急線内用
89|方向設定|A線/下り線:奇数、B線/上り線:偶数。|31～:下り江ノ島線、51～:下り多摩線・上り新宿行き	
104|TIMS運行パターン設定|発駅番号3桁*1000+着駅番号3桁|JR線内では使用不可
105|次駅接近|停止位置までの距離+更新実施可否*1000000|更新を行わない場合、603番を併用すること
117|TIMS行路表矢印|矢印画像のシフト番号 (0～n) を設定|駅間は4等分を推奨
127|降車駅駅名|駅番号を設定|
603|駅名割込み設定|駅番号を設定|踏むと瞬時に設定した駅名になる

### signalインデックス
- 使用しない

### SWインデックス
- 使用しない

### 設定ファイル
ファイル名と同名の設定ファイルが読み込まれる（デフォルトTIMS_new_TM.ini）ここでは以下の設定が可能。

| Section |Key|設定値|既定値|説明|
| :---: | :---: | ---: | ---: | :---: |
|Emulate|ebCutPressure|減圧時間[ms]|1000|ブレーキ減圧時間
|Emulate|lbInit|使用1、不使用0|1|初回起動時力行遅延
Disp|UseJRTIMS|不使用0、使用1、JR線内のみ使用2|0|JR用TIMSの使用可否
Disp|UseUnit|使用1、不使用0|0|ユニット灯使用可否
Disp|UseDistance|使用1、不使用0|1|走行距離使用可否
Disp|Line|東西5、南北7、千代田9、副都心13|9|使用路線

このプラグインは原則車両に同梱しないので、規定値以外を使う場合はこのフォルダ（TIMS_new_9N）上に車両名のフォルダを作り、そこにプラグイン本体と設定ファイルを入れること（E233-2000フォルダを参考にし、これに倣うこと）。

### その他
- 詳細は[Excelシート](https://docs.google.com/spreadsheets/d/1rsIOkY-5uuszAekwyyYBjYd1NrkQBQti/edit?usp=sharing&ouid=117001858782449869576&rtpof=true&sd=true)を参照し、シートを参考に設定すること。
- このプラグインはkikuike様が制作され、当方が代理公開しているソース（TIMS_new_S）より作成している。そのためkikuike様によるreadmeも同梱する。こちらも必ず一読のこと。

## 著作権
GPLを適用する。従って以下のことが認められる（Kikuike様のファイルより引用）。
> - 自由に実行・動作の調査ができます
> - 複製物の再頒布ができます
> - ソースコードを改変する事が出来ます
>   - ソースコードを改変したものを公開する場合、プログラム(PI)とともにソースを公開しなければなりません
> - 商用利用することができます
>   - とはいえ、スレ民から叩かれるのは必至じゃね？
> - GPLｖ3にのっとって、煮るなり焼くなりすることができます

このソースからの改造品を公開する際、許可は不要であるが、可能な限り（当方と連絡がつく状態である場合）事後で良いので報告することが望ましい。また、このプラグインを利用した車両を公開する場合も同様である。

## 更新日時
- 2020/06/24    0.16S版・0.16E版リリース。9号線その他向け対応版。
- 2023/2/15     v0.16TM版　メトロ総合プラグイン併用でTIMS全機能使用可に改修。社線内のTIMS画面表示をTIS地上子互換に変更。これにより社鉄跨ぎも可能。

これより前の履歴はkikuike様のReadMeを参照すること。

## Author
- Twitter [@16000land](https://twitter.com/16000land)
- Web 移転準備中
- Mail [GMail](chiyoda16122@gmail.com)

©Line-16 2018-2023